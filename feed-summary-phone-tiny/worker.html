<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>渔场管理系统 - 工人版</title>
    <link
      href="../static/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="../static/all.min.css"
    />
    <script src="../static/chart.js"></script>
    <style>
      :root {
        --color-primary: #3b82f6;
        --color-secondary: #10b981;
        --color-warning: #fbbf24;
        --color-danger: #ef4444;
        --color-info: #6366f1;
      }
      
      /* 老年模式样式 */
      body {
        font-size: 18px;
        line-height: 1.5;
        overscroll-behavior-y: contain;
        -webkit-overflow-scrolling: touch;
      }
      
      /* 增加对比度 */
      .bg-primary {
        background-color: #1e60d6; /* 更深的蓝色 */
      }
      .text-primary {
        color: #1e60d6; /* 更深的蓝色 */
      }
      .bg-secondary {
        background-color: #0a8f63; /* 更深的绿色 */
      }
      .text-secondary {
        color: #0a8f63; /* 更深的绿色 */
      }
      .bg-warning {
        background-color: #e29400; /* 更深的黄色 */
      }
      .text-warning {
        color: #e29400; /* 更深的黄色 */
      }
      .bg-danger {
        background-color: #d01f1f; /* 更深的红色 */
      }
      .text-danger {
        color: #d01f1f; /* 更深的红色 */
      }
      .bg-info {
        background-color: #4a4dd1; /* 更深的紫色 */
      }
      .text-info {
        color: #4a4dd1; /* 更深的紫色 */
      }
      
      /* 增大字体和按钮尺寸 */
      .text-xs {
        font-size: 16px;
      }
      .text-sm {
        font-size: 18px;
      }
      .text-base {
        font-size: 20px;
      }
      .text-lg {
        font-size: 24px;
      }
      .text-xl {
        font-size: 28px;
      }
      .text-2xl {
        font-size: 32px;
      }
      
      /* 增大图标尺寸 */
      .card-icon {
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 12px;
      }
      
      /* 增大功能按钮尺寸 */
      .function-icon {
        width: 60px;
        height: 60px;
        border-radius: 20px;
        margin-bottom: 8px;
      }
      
      /* 增大底部导航图标 */
      .bottom-nav i {
        font-size: 28px;
      }
      
      .bottom-nav span {
        font-size: 16px;
      }
      
      .bottom-nav {
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        padding: 8px 0;
      }
      
      /* 卡片悬停效果 */
      .card-hover:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
      }
      
      .transition-all {
        transition: all 0.3s ease;
      }
      
      /* 下拉刷新动画 */
      .pull-to-refresh {
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: -60px;
        transition: margin-top 0.3s ease;
      }
      
      .pull-to-refresh.active {
        margin-top: 0;
      }
      
      /* 适配小屏幕的图表 */
      canvas {
        max-height: 180px;
      }
      
      /* 增强按钮可点击性 */
      .clickable {
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .clickable:active {
        transform: scale(0.95);
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <!-- 下拉刷新指示器 -->
    <div class="pull-to-refresh" id="pullToRefresh">
      <div class="flex items-center">
        <i class="fas fa-sync-alt fa-spin mr-2 text-primary text-xl"></i>
        <span class="text-base text-gray-600">下拉刷新...</span>
      </div>
    </div>
    
    <!-- 顶部导航栏 -->
    <div class="bg-primary text-white p-5 pb-6 rounded-b-3xl relative overflow-hidden">
      <!-- 顶部状态栏 -->
      <div class="flex justify-between items-center mb-4">
        <div>
          <span class="text-2xl font-bold">1号养殖基地</span>
        </div>
        <div class="flex items-center space-x-5">
          <a href="#" class="text-white">
            <i class="fas fa-bell text-xl"></i>
          </a>
        </div>
      </div>
      
      <!-- 工人信息 -->
      <div class="flex justify-between items-center">
        <div class="flex items-center">
          <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center mr-3">
            <i class="fas fa-user text-primary text-2xl"></i>
          </div>
          <div>
            <div class="text-xl font-medium">张师傅</div>
            <div class="text-lg">养殖工人</div>
          </div>
        </div>
        <div class="text-right">
          <div class="text-lg">今日任务</div>
          <div class="text-xl font-bold">5/8</div>
        </div>
      </div>
      
      <!-- 波浪背景效果 -->
      <div class="absolute bottom-0 left-0 right-0 h-16 opacity-20 overflow-hidden">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" class="absolute bottom-0 left-0 w-full" style="min-width: 100%; width: 100vw; transform: translateX(0);">
          <path fill="#ffffff" fill-opacity="1" d="M0,128L48,144C96,160,192,192,288,186.7C384,181,480,139,576,138.7C672,139,768,181,864,181.3C960,181,1056,139,1152,122.7C1248,107,1344,117,1392,122.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
        </svg>
      </div>
    </div>

    <!-- 功能快捷入口 -->
    <div class="bg-white rounded-xl shadow-sm mx-4 p-4 -mt-4 relative z-10 mb-6">
      <div class="grid grid-cols-4 gap-1 text-center">
        <a href="#" class="flex flex-col items-center clickable w-full px-1">
          <div class="function-icon bg-red-100 flex items-center justify-center">
            <i class="fas fa-tasks text-red-500 text-2xl"></i>
          </div>
          <span class="text-base font-medium whitespace-nowrap">我的任务</span>
        </a>
        <a href="#" class="flex flex-col items-center clickable w-full px-1">
          <div class="function-icon bg-blue-100 flex items-center justify-center">
            <i class="fas fa-tachometer-alt text-blue-500 text-2xl"></i>
          </div>
          <span class="text-base font-medium whitespace-nowrap">监测状态</span>
        </a>
        <a href="#" class="flex flex-col items-center clickable w-full px-1">
          <div class="function-icon bg-green-100 flex items-center justify-center">
            <i class="fas fa-cogs text-green-500 text-2xl"></i>
          </div>
          <span class="text-base font-medium whitespace-nowrap">控制设备</span>
        </a>
        <a href="#" class="flex flex-col items-center clickable w-full px-1">
          <div class="function-icon bg-purple-100 flex items-center justify-center">
            <i class="fas fa-robot text-purple-500 text-2xl"></i>
          </div>
          <span class="text-base font-medium whitespace-nowrap">小鲤助手</span>
        </a>
      </div>
    </div>

    <!-- 主要内容 -->
    <div class="px-4 py-2">

      <!-- 我的任务 -->
      <div
        class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover mb-6"
      >
        <div class="p-4">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold">今日任务</h3>
            <span
              class="bg-blue-100 text-primary text-base px-3 py-1 rounded-full"
              >5/8 已完成</span
            >
          </div>
          <div class="space-y-4">
            <div class="bg-gray-100 rounded-lg p-4 clickable">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div
                    class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-danger mr-3"
                  >
                    <i class="fas fa-exclamation-circle text-xl"></i>
                  </div>
                  <div>
                    <p class="text-lg font-medium">紧急任务</p>
                    <p class="text-base text-gray-600">3号池水质异常处理</p>
                  </div>
                </div>
                <span class="text-danger font-bold">待处理</span>
              </div>
            </div>
            <div class="bg-gray-100 rounded-lg p-4 clickable">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div
                    class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center text-warning mr-3"
                  >
                    <i class="fas fa-utensils text-xl"></i>
                  </div>
                  <div>
                    <p class="text-lg font-medium">日常任务</p>
                    <p class="text-base text-gray-600">5号池投喂饲料</p>
                  </div>
                </div>
                <span class="text-warning font-bold">进行中</span>
              </div>
            </div>
            <div class="bg-gray-100 rounded-lg p-4 clickable">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div
                    class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-secondary mr-3"
                  >
                    <i class="fas fa-check-circle text-xl"></i>
                  </div>
                  <div>
                    <p class="text-lg font-medium">日常任务</p>
                    <p class="text-base text-gray-600">2号池水质检测</p>
                  </div>
                </div>
                <span class="text-secondary font-bold">已完成</span>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-gray-100 px-4 py-3">
          <a
            href="#"
            class="text-primary text-lg font-medium flex items-center justify-center clickable"
          >
            查看全部任务 <i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>

      <!-- 我的养殖池 -->
      <div
        class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover mb-6"
      >
        <div class="p-4">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold">我的养殖池</h3>
            <span
              class="bg-green-100 text-secondary text-base px-3 py-1 rounded-full"
              >5个池塘</span
            >
          </div>
          <div class="space-y-4">
            <div class="bg-gray-100 rounded-lg p-4 clickable">
              <div class="flex justify-between items-start">
                <div>
                  <p class="text-lg font-bold">2号养殖池</p>
                  <p class="text-base text-gray-600 mt-1">鲈鱼 | 养殖75天</p>
                  <div class="flex mt-2 space-x-3">
                    <div class="bg-blue-100 text-primary px-3 py-1 rounded-lg">
                      <span class="font-medium">水温: 26.5°C</span>
                    </div>
                    <div class="bg-green-100 text-secondary px-3 py-1 rounded-lg">
                      <span class="font-medium">溶氧: 6.8mg/L</span>
                    </div>
                  </div>
                </div>
                <div class="bg-green-100 text-secondary px-3 py-1 rounded-lg">
                  <span class="font-medium">正常</span>
                </div>
              </div>
            </div>
            <div class="bg-gray-100 rounded-lg p-4 clickable">
              <div class="flex justify-between items-start">
                <div>
                  <p class="text-lg font-bold">3号养殖池</p>
                  <p class="text-base text-gray-600 mt-1">草鱼 | 养殖45天</p>
                  <div class="flex mt-2 space-x-3">
                    <div class="bg-blue-100 text-primary px-3 py-1 rounded-lg">
                      <span class="font-medium">水温: 25.8°C</span>
                    </div>
                    <div class="bg-red-100 text-danger px-3 py-1 rounded-lg">
                      <span class="font-medium">溶氧: 4.2mg/L</span>
                    </div>
                  </div>
                </div>
                <div class="bg-red-100 text-danger px-3 py-1 rounded-lg">
                  <span class="font-medium">异常</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-gray-100 px-4 py-3">
          <a
            href="#"
            class="text-primary text-lg font-medium flex items-center justify-center clickable"
          >
            查看全部养殖池 <i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>

      <!-- 任务统计 -->
      <div
        class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover mb-6"
      >
        <div class="p-4">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold">任务统计</h3>
            <span
              class="bg-blue-100 text-primary text-base px-3 py-1 rounded-full"
              >本周</span
            >
          </div>
          <div class="mb-4">
            <canvas id="taskChart" height="180"></canvas>
          </div>
          <div class="grid grid-cols-3 gap-3 text-center">
            <div class="bg-gray-100 rounded-lg p-3">
              <p class="text-base text-gray-600">已完成</p>
              <p class="text-xl font-bold text-secondary">32</p>
            </div>
            <div class="bg-gray-100 rounded-lg p-3">
              <p class="text-base text-gray-600">进行中</p>
              <p class="text-xl font-bold text-warning">5</p>
            </div>
            <div class="bg-gray-100 rounded-lg p-3">
              <p class="text-base text-gray-600">待处理</p>
              <p class="text-xl font-bold text-danger">3</p>
            </div>
          </div>
        </div>
      </div>

      <!-- 快捷功能 -->
      <div class="mb-20">
        <h3 class="text-xl font-bold mb-4">快捷功能</h3>
        <div class="grid grid-cols-2 gap-4">
          <a href="#" class="bg-white rounded-xl shadow-sm p-4 flex items-center clickable">
            <div class="w-14 h-14 rounded-full bg-yellow-100 flex items-center justify-center mr-3">
              <i class="fas fa-shopping-basket text-yellow-500 text-2xl"></i>
            </div>
            <span class="text-lg font-medium">渔需品申请</span>
          </a>
          <a href="#" class="bg-white rounded-xl shadow-sm p-4 flex items-center clickable">
            <div class="w-14 h-14 rounded-full bg-blue-100 flex items-center justify-center mr-3">
              <i class="fas fa-clipboard-list text-blue-500 text-2xl"></i>
            </div>
            <span class="text-lg font-medium">工作记录</span>
          </a>
          <a href="#" class="bg-white rounded-xl shadow-sm p-4 flex items-center clickable">
            <div class="w-14 h-14 rounded-full bg-green-100 flex items-center justify-center mr-3">
              <i class="fas fa-video text-green-500 text-2xl"></i>
            </div>
            <span class="text-lg font-medium">视频监控</span>
          </a>
          <a href="#" class="bg-white rounded-xl shadow-sm p-4 flex items-center clickable">
            <div class="w-14 h-14 rounded-full bg-purple-100 flex items-center justify-center mr-3">
              <i class="fas fa-question-circle text-purple-500 text-2xl"></i>
            </div>
            <span class="text-lg font-medium">帮助中心</span>
          </a>
        </div>
      </div>
    </div>

    <!-- 底部导航栏 -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white bottom-nav z-10">
      <div class="flex justify-around py-2">
        <a href="#" class="flex flex-col items-center px-3 py-1 text-primary">
          <i class="fas fa-home"></i>
          <span class="mt-1">首页</span>
        </a>
        <a href="#" class="flex flex-col items-center px-3 py-1 text-gray-500">
          <i class="fas fa-tasks"></i>
          <span class="mt-1">任务</span>
        </a>
        <a href="#" class="flex flex-col items-center px-3 py-1 text-gray-500">
          <i class="fas fa-fish"></i>
          <span class="mt-1">养殖池</span>
        </a>
        <a href="#" class="flex flex-col items-center px-3 py-1 text-gray-500">
          <i class="fas fa-user"></i>
          <span class="mt-1">我的</span>
        </a>
      </div>
    </nav>

    <script>
      // 任务统计图表
      const taskCtx = document
        .getElementById("taskChart")
        .getContext("2d");
      const taskChart = new Chart(taskCtx, {
        type: "bar",
        data: {
          labels: ["周一", "周二", "周三", "周四", "周五", "周六", "周日"],
          datasets: [
            {
              label: "已完成任务",
              data: [5, 6, 4, 7, 5, 3, 2],
              backgroundColor: "#0a8f63",
              borderWidth: 0,
              borderRadius: 5,
            },
            {
              label: "总任务数",
              data: [8, 8, 7, 9, 8, 5, 3],
              backgroundColor: "#e5e7eb",
              borderWidth: 0,
              borderRadius: 5,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: true,
              position: "top",
              labels: {
                font: {
                  size: 14
                }
              }
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                font: {
                  size: 14
                }
              }
            },
            x: {
              ticks: {
                font: {
                  size: 14
                }
              }
            }
          },
        },
      });
      
      // 下拉刷新功能
      let touchStartY = 0;
      let touchEndY = 0;
      const pullToRefresh = document.getElementById('pullToRefresh');
      
      document.addEventListener('touchstart', function(e) {
        touchStartY = e.touches[0].clientY;
      }, false);
      
      document.addEventListener('touchmove', function(e) {
        touchEndY = e.touches[0].clientY;
        
        // 只有当页面滚动到顶部时才触发下拉刷新
        if (window.scrollY === 0 && touchEndY > touchStartY) {
          const distance = touchEndY - touchStartY;
          
          if (distance > 30 && distance < 90) {
            pullToRefresh.classList.add('active');
            e.preventDefault(); // 阻止默认滚动
          }
        }
      }, { passive: false });
      
      document.addEventListener('touchend', function() {
        if (pullToRefresh.classList.contains('active')) {
          // 模拟刷新操作
          setTimeout(() => {
            pullToRefresh.classList.remove('active');
            // 这里可以添加实际的刷新逻辑
            // location.reload();
          }, 1500);
        }
      }, false);
    </script>
  </body>
</html>