<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¥²æ–™è¿›è´§ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            line-height: 1.6;
        }

        .container {
            max-width: 414px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 4px;
            border-radius: 2px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .step-container {
            padding: 20px;
            display: none;
        }

        .step-container.active {
            display: block;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .step-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 15px;
            font-size: 1.2rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
        }

        .supplier-card {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .supplier-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .supplier-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }

        .supplier-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .supplier-name {
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }

        .supplier-rating {
            color: #ff9800;
            font-size: 0.9rem;
        }

        .supplier-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9rem;
            color: #666;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
        }

        .compare-btn {
            background: linear-gradient(135deg, #4ECDC4, #44A08D);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: transform 0.2s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            width: 48%;
            margin-top: 20px;
        }

        .btn-group {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .alert {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            color: #856404;
        }

        .alert.danger {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .alert.success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .photo-upload {
            border: 2px dashed #ccc;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .photo-upload:hover {
            border-color: #667eea;
        }

        .photo-upload.has-photo {
            border-style: solid;
            border-color: #4CAF50;
            background: #f8fff8;
        }

        .photo-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .task-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-status {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-progress {
            background: #cce5ff;
            color: #004085;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .floating-actions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: transform 0.2s ease;
        }

        .fab:hover {
            transform: scale(1.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
        }

        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 20px;
            border-radius: 15px;
            max-width: 350px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close {
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .comparison-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        @media (max-width: 480px) {
            .container {
                max-width: 100%;
            }
            
            .supplier-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš› é¥²æ–™è¿›è´§ç³»ç»Ÿ</h1>
            <p>æ™ºèƒ½åŒ–é¥²æ–™é‡‡è´­æµç¨‹ç®¡ç†</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 14%"></div>
            </div>
        </div>

        <!-- æ­¥éª¤1: åº“å­˜è­¦æŠ¥ -->
        <div class="step-container active" id="step1">
            <div class="step-title">
                <div class="step-icon">âš ï¸</div>
                åº“å­˜è­¦æŠ¥
            </div>
            
            <div class="alert danger">
                <strong>ğŸš¨ é¥²æ–™åº“å­˜ä¸è¶³è­¦æŠ¥</strong><br>
                AåŒºé¥²æ–™å­˜é‡ä»…å‰©15%ï¼ŒBåŒºå­˜é‡32%ï¼Œéœ€è¦ç«‹å³è¡¥è´§ï¼
            </div>

            <div class="form-group">
                <label class="form-label">é€‰æ‹©éœ€è¦è¡¥è´§çš„é¥²æ–™ç±»å‹</label>
                <select class="form-select" id="feedType">
                    <option value="">è¯·é€‰æ‹©é¥²æ–™ç±»å‹</option>
                    <option value="growth">ç”Ÿé•¿é¥²æ–™</option>
                    <option value="breeding">ç¹æ®–é¥²æ–™</option>
                    <option value="juvenile">å¹¼é±¼é¥²æ–™</option>
                    <option value="special">ç‰¹ç§é¥²æ–™</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">é¢„è®¡é‡‡è´­æ•°é‡ (å¨)</label>
                <input type="number" class="form-input" id="quantity" placeholder="è¯·è¾“å…¥é‡‡è´­æ•°é‡" min="1">
            </div>

            <div class="task-item">
                <div>
                    <strong>è…¾åº“ä»»åŠ¡</strong><br>
                    <small>æ¸…ç†AåŒºåº“æˆ¿ï¼Œå‡†å¤‡æ¥æ”¶æ–°é¥²æ–™</small>
                </div>
                <div class="task-status status-pending">å¾…æ‰§è¡Œ</div>
            </div>

            <button class="btn-primary" onclick="nextStep()">å¼€å§‹è¿›è´§æµç¨‹</button>
        </div>

        <!-- æ­¥éª¤2: é€‰æ‹©å‚å®¶ -->
        <div class="step-container" id="step2">
            <div class="step-title">
                <div class="step-icon">ğŸ­</div>
                é€‰æ‹©å‚å®¶
            </div>

            <div class="supplier-card" onclick="selectSupplier(1)" id="supplier1">
                <div class="supplier-header">
                    <div class="supplier-name">æµ·å¤§é¥²æ–™é›†å›¢</div>
                    <div class="supplier-rating">â­ 4.8åˆ†</div>
                </div>
                <div class="supplier-details">
                    <div class="detail-item">
                        <span>ä»·æ ¼:</span>
                        <span>Â¥3,200/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>æ”¯ä»˜æ–¹å¼:</span>
                        <span>æœˆç»“30å¤©</span>
                    </div>
                    <div class="detail-item">
                        <span>è¿è¾“æˆæœ¬:</span>
                        <span>Â¥150/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>äº¤è´§æœŸ:</span>
                        <span>2-3å¤©</span>
                    </div>
                </div>
                <button class="compare-btn" onclick="showComparison(event)">å¯¹æ¯”åˆ†æ</button>
            </div>

            <div class="supplier-card" onclick="selectSupplier(2)" id="supplier2">
                <div class="supplier-header">
                    <div class="supplier-name">é€šå¨é¥²æ–™</div>
                    <div class="supplier-rating">â­ 4.6åˆ†</div>
                </div>
                <div class="supplier-details">
                    <div class="detail-item">
                        <span>ä»·æ ¼:</span>
                        <span>Â¥3,150/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>æ”¯ä»˜æ–¹å¼:</span>
                        <span>ç°é‡‘ä¼˜æƒ 5%</span>
                    </div>
                    <div class="detail-item">
                        <span>è¿è¾“æˆæœ¬:</span>
                        <span>Â¥180/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>äº¤è´§æœŸ:</span>
                        <span>1-2å¤©</span>
                    </div>
                </div>
                <button class="compare-btn" onclick="showComparison(event)">å¯¹æ¯”åˆ†æ</button>
            </div>

            <div class="supplier-card" onclick="selectSupplier(3)" id="supplier3">
                <div class="supplier-header">
                    <div class="supplier-name">æ­£å¤§é¥²æ–™</div>
                    <div class="supplier-rating">â­ 4.7åˆ†</div>
                </div>
                <div class="supplier-details">
                    <div class="detail-item">
                        <span>ä»·æ ¼:</span>
                        <span>Â¥3,280/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>æ”¯ä»˜æ–¹å¼:</span>
                        <span>æœˆç»“45å¤©</span>
                    </div>
                    <div class="detail-item">
                        <span>è¿è¾“æˆæœ¬:</span>
                        <span>Â¥120/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>äº¤è´§æœŸ:</span>
                        <span>3-4å¤©</span>
                    </div>
                </div>
                <button class="compare-btn" onclick="showComparison(event)">å¯¹æ¯”åˆ†æ</button>
            </div>

            <div class="btn-group">
                <button class="btn-secondary" onclick="prevStep()">ä¸Šä¸€æ­¥</button>
                <button class="btn-primary" onclick="nextStep()" id="selectSupplierBtn" disabled>ç¡®è®¤å‚å®¶</button>
            </div>
        </div>

        <!-- æ­¥éª¤3: é€‰æ‹©è¿è¾“è½¦è¾† -->
        <div class="step-container" id="step3">
            <div class="step-title">
                <div class="step-icon">ğŸš›</div>
                é€‰æ‹©è¿è¾“è½¦è¾†
            </div>

            <div class="supplier-card" onclick="selectVehicle(1)" id="vehicle1">
                <div class="supplier-header">
                    <div class="supplier-name">å¿«è¿ç‰©æµ - ç²¤A12345</div>
                    <div class="supplier-rating">â­ 4.9åˆ†</div>
                </div>
                <div class="supplier-details">
                    <div class="detail-item">
                        <span>è¿è´¹:</span>
                        <span>Â¥150/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>è¿è¾“æ—¶é—´:</span>
                        <span>6å°æ—¶</span>
                    </div>
                    <div class="detail-item">
                        <span>è½½é‡:</span>
                        <span>25å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>è¿è¾“è´¨é‡:</span>
                        <span>ä¼˜ç§€</span>
                    </div>
                </div>
            </div>

            <div class="supplier-card" onclick="selectVehicle(2)" id="vehicle2">
                <div class="supplier-header">
                    <div class="supplier-name">å®‰å…¨è¿è¾“ - ç²¤B67890</div>
                    <div class="supplier-rating">â­ 4.7åˆ†</div>
                </div>
                <div class="supplier-details">
                    <div class="detail-item">
                        <span>è¿è´¹:</span>
                        <span>Â¥130/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>è¿è¾“æ—¶é—´:</span>
                        <span>8å°æ—¶</span>
                    </div>
                    <div class="detail-item">
                        <span>è½½é‡:</span>
                        <span>20å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>è¿è¾“è´¨é‡:</span>
                        <span>è‰¯å¥½</span>
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn-secondary" onclick="prevStep()">ä¸Šä¸€æ­¥</button>
                <button class="btn-primary" onclick="nextStep()" id="selectVehicleBtn" disabled>ç¡®è®¤è½¦è¾†</button>
            </div>
        </div>

        <!-- æ­¥éª¤4: é€‰æ‹©å¸è´§è€… -->
        <div class="step-container" id="step4">
            <div class="step-title">
                <div class="step-icon">ğŸ‘·</div>
                é€‰æ‹©å¸è´§è€…
            </div>

            <div class="supplier-card" onclick="selectUnloader(1)" id="unloader1">
                <div class="supplier-header">
                    <div class="supplier-name">ä¸“ä¸šå¸è´§é˜ŸAç»„</div>
                    <div class="supplier-rating">â­ 4.8åˆ†</div>
                </div>
                <div class="supplier-details">
                    <div class="detail-item">
                        <span>å¸è´§ä»·æ ¼:</span>
                        <span>Â¥50/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>å¸è´§æ•ˆç‡:</span>
                        <span>2å°æ—¶/è½¦</span>
                    </div>
                    <div class="detail-item">
                        <span>äººå‘˜æ•°é‡:</span>
                        <span>4äºº</span>
                    </div>
                    <div class="detail-item">
                        <span>å¸è´§è´¨é‡:</span>
                        <span>ä¼˜ç§€</span>
                    </div>
                </div>
            </div>

            <div class="supplier-card" onclick="selectUnloader(2)" id="unloader2">
                <div class="supplier-header">
                    <div class="supplier-name">å¿«é€Ÿå¸è´§é˜ŸBç»„</div>
                    <div class="supplier-rating">â­ 4.5åˆ†</div>
                </div>
                <div class="supplier-details">
                    <div class="detail-item">
                        <span>å¸è´§ä»·æ ¼:</span>
                        <span>Â¥40/å¨</span>
                    </div>
                    <div class="detail-item">
                        <span>å¸è´§æ•ˆç‡:</span>
                        <span>1.5å°æ—¶/è½¦</span>
                    </div>
                    <div class="detail-item">
                        <span>äººå‘˜æ•°é‡:</span>
                        <span>6äºº</span>
                    </div>
                    <div class="detail-item">
                        <span>å¸è´§è´¨é‡:</span>
                        <span>è‰¯å¥½</span>
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn-secondary" onclick="prevStep()">ä¸Šä¸€æ­¥</button>
                <button class="btn-primary" onclick="nextStep()" id="selectUnloaderBtn" disabled>ç¡®è®¤å¸è´§é˜Ÿ</button>
            </div>
        </div>

        <!-- æ­¥éª¤5: è½¦è¾†åˆ°è¾¾ -->
        <div class="step-container" id="step5">
            <div class="step-title">
                <div class="step-icon">ğŸ“¸</div>
                è½¦è¾†åˆ°è¾¾ç¡®è®¤
            </div>

            <div class="alert">
                <strong>ğŸ“‹ æ‹ç…§è¦æ±‚</strong><br>
                è¯·ç¡®ä¿ç…§ç‰‡åŒ…å«ï¼šå¸æœºã€è½¦ç‰Œå·ã€é€è´§å•åŒæ¡†
            </div>

            <div class="form-group">
                <label class="form-label">ä¸Šä¼ åˆ°è¾¾ç…§ç‰‡</label>
                <div class="photo-upload" onclick="uploadPhoto('arrival')" id="arrivalPhoto">
                    <div>ğŸ“· ç‚¹å‡»æ‹ç…§ä¸Šä¼ </div>
                    <small>å¸æœºã€è½¦ç‰Œå·ã€é€è´§å•åŒæ¡†</small>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">è¿è¾“æ—¶é—´ (å°æ—¶)</label>
                <input type="number" class="form-input" id="transportTime" placeholder="è¯·è¾“å…¥å®é™…è¿è¾“æ—¶é—´" step="0.5">
            </div>

            <div class="form-group">
                <label class="form-label">è¿è¾“æˆæœ¬ (å…ƒ)</label>
                <input type="number" class="form-input" id="transportCost" placeholder="è¯·è¾“å…¥å®é™…è¿è¾“æˆæœ¬">
            </div>

            <div class="btn-group">
                <button class="btn-secondary" onclick="prevStep()">ä¸Šä¸€æ­¥</button>
                <button class="btn-primary" onclick="nextStep()" id="confirmArrivalBtn" disabled>ç¡®è®¤åˆ°è¾¾</button>
            </div>
        </div>

        <!-- æ­¥éª¤6: å¸è´§æµç¨‹ -->
        <div class="step-container" id="step6">
            <div class="step-title">
                <div class="step-icon">ğŸ“¦</div>
                å¸è´§æµç¨‹
            </div>

            <div class="task-item">
                <div>
                    <strong>å¸è´§è¿›è¡Œä¸­</strong><br>
                    <small>ä¸“ä¸šå¸è´§é˜ŸAç»„æ­£åœ¨å¸è´§...</small>
                </div>
                <div class="task-status status-progress">è¿›è¡Œä¸­</div>
            </div>

            <div class="form-group">
                <label class="form-label">å¸è´§å¼€å§‹æ—¶é—´</label>
                <input type="datetime-local" class="form-input" id="unloadStartTime">
            </div>

            <div class="form-group">
                <label class="form-label">é¢„è®¡å¸è´§å®Œæˆæ—¶é—´</label>
                <input type="datetime-local" class="form-input" id="unloadEndTime">
            </div>

            <button class="btn-primary" onclick="completeUnloading()">å®Œæˆå¸è´§</button>
        </div>

        <!-- æ­¥éª¤7: æ¸…ç‚¹æµç¨‹ -->
        <div class="step-container" id="step7">
            <div class="step-title">
                <div class="step-icon">ğŸ“‹</div>
                æ¸…ç‚¹æµç¨‹
            </div>

            <div class="form-group">
                <label class="form-label">æ¸…ç‚¹ç…§ç‰‡</label>
                <div class="photo-upload" onclick="uploadPhoto('inventory')" id="inventoryPhoto">
                    <div>ğŸ“· ç‚¹å‡»æ‹ç…§ä¸Šä¼ </div>
                    <small>é¥²æ–™æ•´ä½“çŠ¶å†µç…§ç‰‡</small>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ç ´æŸé‡ (kg)</label>
                <input type="number" class="form-input" id="damageAmount" placeholder="è¯·è¾“å…¥ç ´æŸé¥²æ–™é‡é‡" min="0">
            </div>

            <div class="form-group">
                <label class="form-label">æ‰“æ¹¿é‡ (kg)</label>
                <input type="number" class="form-input" id="wetAmount" placeholder="è¯·è¾“å…¥æ‰“æ¹¿é¥²æ–™é‡é‡" min="0">
            </div>

            <div class="form-group">
                <label class="form-label">å®é™…æ”¶è´§é‡ (kg)</label>
                <input type="number" class="form-input" id="actualAmount" placeholder="è¯·è¾“å…¥å®é™…æ”¶è´§é‡é‡">
            </div>

            <div class="form-group">
                <label class="form-label">è´¨é‡è¯„ä»·</label>
                <select class="form-select" id="qualityRating">
                    <option value="">è¯·é€‰æ‹©è´¨é‡ç­‰çº§</option>
                    <option value="excellent">ä¼˜ç§€</option>
                    <option value="good">è‰¯å¥½</option>
                    <option value="average">ä¸€èˆ¬</option>
                    <option value="poor">è¾ƒå·®</option>
                </select>
            </div>

            <button class="btn-primary" onclick="completeProcess()">å®Œæˆè¿›è´§æµç¨‹</button>
        </div>

        <!-- æ­¥éª¤8: å®Œæˆ -->
        <div class="step-container" id="step8">
            <div class="step-title">
                <div class="step-icon">âœ…</div>
                æµç¨‹å®Œæˆ
            </div>

            <div class="alert success">
                <strong>ğŸ‰ è¿›è´§æµç¨‹å·²å®Œæˆï¼</strong><br>
                é¥²æ–™å·²æˆåŠŸå…¥åº“ï¼Œç›¸å…³æ•°æ®å·²åŒæ­¥åˆ°ç³»ç»Ÿã€‚
            </div>

            <div class="task-item">
                <div>
                    <strong>åº“å­˜æ›´æ–°</strong><br>
                    <small>AåŒºé¥²æ–™å­˜é‡å·²æ›´æ–°è‡³85%</small>
                </div>
                <div class="task-status status-completed">å·²å®Œæˆ</div>
            </div>

            <div class="task-item">
                <div>
                    <strong>è´¢åŠ¡è®°å½•</strong><br>
                    <small>é‡‡è´­æˆæœ¬å·²è®°å½•åˆ°è´¢åŠ¡ç³»ç»Ÿ</small>
                </div>
                <div class="task-status status-completed">å·²å®Œæˆ</div>
            </div>

            <div class="task-item">
                <div>
                    <strong>è´¨é‡æ¡£æ¡ˆ</strong><br>
                    <small>é¥²æ–™è´¨é‡ä¿¡æ¯å·²å»ºæ¡£</small>
                </div>
                <div class="task-status status-completed">å·²å®Œæˆ</div>
            </div>

            <button class="btn-primary" onclick="returnToOverview()">è¿”å›æ¦‚è§ˆé¡µé¢</button>
        </div>
    </div>

    <!-- æµ®åŠ¨æ“ä½œæŒ‰é’® -->
    <div class="floating-actions">
        <button class="fab" onclick="showTaskList()" title="ä»»åŠ¡åˆ—è¡¨">ğŸ“‹</button>
        <button class="fab" onclick="emergencyContact()" title="ç´§æ€¥è”ç³»">ğŸ“</button>
    </div>

    <!-- å¯¹æ¯”æ¨¡æ€æ¡† -->
    <div class="modal" id="comparisonModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>å‚å®¶å¯¹æ¯”åˆ†æ</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>é¡¹ç›®</th>
                        <th>æµ·å¤§é¥²æ–™</th>
                        <th>é€šå¨é¥²æ–™</th>
                        <th>æ­£å¤§é¥²æ–™</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ä»·æ ¼/å¨</td>
                        <td>Â¥3,200</td>
                        <td>Â¥3,150</td>
                        <td>Â¥3,280</td>
                    </tr>
                    <tr>
                        <td>è¿è¾“æˆæœ¬</td>
                        <td>Â¥150/å¨</td>
                        <td>Â¥180/å¨</td>
                        <td>Â¥120/å¨</td>
                    </tr>
                    <tr>
                        <td>æ€»æˆæœ¬</td>
                        <td>Â¥3,350</td>
                        <td>Â¥3,330</td>
                        <td>Â¥3,400</td>
                    </tr>
                    <tr>
                        <td>äº¤è´§æœŸ</td>
                        <td>2-3å¤©</td>
                        <td>1-2å¤©</td>
                        <td>3-4å¤©</td>
                    </tr>
                    <tr>
                        <td>è¯„åˆ†</td>
                        <td>4.8åˆ†</td>
                        <td>4.6åˆ†</td>
                        <td>4.7åˆ†</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let selectedSupplier = null;
        let selectedVehicle = null;
        let selectedUnloader = null;
        let arrivalPhotoUploaded = false;
        let inventoryPhotoUploaded = false;

        function nextStep() {
            if (validateCurrentStep()) {
                document.getElementById(`step${currentStep}`).classList.remove('active');
                currentStep++;
                document.getElementById(`step${currentStep}`).classList.add('active');
                updateProgress();
                
                // ç‰¹æ®Šå¤„ç†
                if (currentStep === 6) {
                    // è‡ªåŠ¨è®¾ç½®å¸è´§å¼€å§‹æ—¶é—´
                    document.getElementById('unloadStartTime').value = new Date().toISOString().slice(0, 16);
                    // é¢„è®¡2å°æ—¶åå®Œæˆ
                    let endTime = new Date();
                    endTime.setHours(endTime.getHours() + 2);
                    document.getElementById('unloadEndTime').value = endTime.toISOString().slice(0, 16);
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                document.getElementById(`step${currentStep}`).classList.remove('active');
                currentStep--;
                document.getElementById(`step${currentStep}`).classList.add('active');
                updateProgress();
            }
        }

        function updateProgress() {
            const progress = (currentStep / 8) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function validateCurrentStep() {
            switch (currentStep) {
                case 1:
                    return document.getElementById('feedType').value && document.getElementById('quantity').value;
                case 2:
                    return selectedSupplier !== null;
                case 3:
                    return selectedVehicle !== null;
                case 4:
                    return selectedUnloader !== null;
                case 5:
                    return arrivalPhotoUploaded && document.getElementById('transportTime').value && document.getElementById('transportCost').value;
                case 6:
                    return document.getElementById('unloadStartTime').value && document.getElementById('unloadEndTime').value;
                case 7:
                    return inventoryPhotoUploaded && document.getElementById('actualAmount').value && document.getElementById('qualityRating').value;
                default:
                    return true;
            }
        }

        function selectSupplier(id) {
            // æ¸…é™¤ä¹‹å‰çš„é€‰æ‹©
            document.querySelectorAll('.supplier-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // é€‰æ‹©å½“å‰ä¾›åº”å•†
            document.getElementById(`supplier${id}`).classList.add('selected');
            selectedSupplier = id;
            document.getElementById('selectSupplierBtn').disabled = false;
        }

        function selectVehicle(id) {
            document.querySelectorAll('[id^="vehicle"]').forEach(card => {
                card.classList.remove('selected');
            });
            
            document.getElementById(`vehicle${id}`).classList.add('selected');
            selectedVehicle = id;
            document.getElementById('selectVehicleBtn').disabled = false;
        }

        function selectUnloader(id) {
            document.querySelectorAll('[id^="unloader"]').forEach(card => {
                card.classList.remove('selected');
            });
            
            document.getElementById(`unloader${id}`).classList.add('selected');
            selectedUnloader = id;
            document.getElementById('selectUnloaderBtn').disabled = false;
        }

        function uploadPhoto(type) {
            // æ¨¡æ‹Ÿç…§ç‰‡ä¸Šä¼ 
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.capture = 'camera';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const photoDiv = document.getElementById(type + 'Photo');
                        photoDiv.classList.add('has-photo');
                        photoDiv.innerHTML = `
                            <div>âœ… ç…§ç‰‡å·²ä¸Šä¼ </div>
                            <img src="${e.target.result}" class="photo-preview" alt="ä¸Šä¼ çš„ç…§ç‰‡">
                        `;
                        
                        if (type === 'arrival') {
                            arrivalPhotoUploaded = true;
                            document.getElementById('confirmArrivalBtn').disabled = false;
                        } else if (type === 'inventory') {
                            inventoryPhotoUploaded = true;
                        }
                    };
                    reader.readAsDataURL(file);
                }
            };
            
            input.click();
        }

        function completeUnloading() {
            if (document.getElementById('unloadStartTime').value && document.getElementById('unloadEndTime').value) {
                // æ›´æ–°ä»»åŠ¡çŠ¶æ€
                document.querySelector('.task-status.status-progress').textContent = 'å·²å®Œæˆ';
                document.querySelector('.task-status.status-progress').className = 'task-status status-completed';
                
                setTimeout(() => {
                    nextStep();
                }, 1000);
            } else {
                alert('è¯·å¡«å†™å®Œæ•´çš„å¸è´§æ—¶é—´ä¿¡æ¯');
            }
        }

        function completeProcess() {
            if (validateCurrentStep()) {
                nextStep();
                
                // æ¨¡æ‹Ÿæ•°æ®åŒæ­¥
                setTimeout(() => {
                    alert('æ•°æ®å·²åŒæ­¥åˆ°åŒºå—é“¾ç³»ç»Ÿï¼Œè®°å½•ä¸å¯æ›´æ”¹');
                }, 2000);
            } else {
                alert('è¯·å®Œæˆæ‰€æœ‰å¿…å¡«é¡¹');
            }
        }

        function returnToOverview() {
            window.location.href = 'fishery-overview.html';
        }

        function showComparison(event) {
            event.stopPropagation();
            document.getElementById('comparisonModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('comparisonModal').style.display = 'none';
        }

        function showTaskList() {
            alert('ä»»åŠ¡åˆ—è¡¨ï¼š\n1. è…¾åº“ä»»åŠ¡ - è¿›è¡Œä¸­\n2. é¥²æ–™è´¨æ£€ - å¾…æ‰§è¡Œ\n3. åº“å­˜æ›´æ–° - å¾…æ‰§è¡Œ');
        }

        function emergencyContact() {
            alert('ç´§æ€¥è”ç³»æ–¹å¼ï¼š\né‡‡è´­ç»ç†ï¼š138-0000-1234\nè¿è¾“è°ƒåº¦ï¼š138-0000-5678\nè´¨æ£€è´Ÿè´£äººï¼š138-0000-9012');
        }

        // ç›‘å¬è¡¨å•å˜åŒ–ï¼Œå®æ—¶éªŒè¯
        document.addEventListener('input', function(e) {
            if (currentStep === 5) {
                const transportTime = document.getElementById('transportTime').value;
                const transportCost = document.getElementById('transportCost').value;
                document.getElementById('confirmArrivalBtn').disabled = !(arrivalPhotoUploaded && transportTime && transportCost);
            }
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('comparisonModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // åˆå§‹åŒ–
        updateProgress();
    </script>
</body>
</html>