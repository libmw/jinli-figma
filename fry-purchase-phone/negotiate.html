<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>洽谈记录 - 鱼种采购系统</title>
    <link
      href="../static/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="../static/all.min.css"
    />
    <style>
      :root {
        --color-primary: #3b82f6;
        --color-secondary: #10b981;
        --color-warning: #fbbf24;
        --color-danger: #ef4444;
        --color-info: #6366f1;
      }
      .bg-primary {
        background-color: var(--color-primary);
      }
      .bg-secondary {
        background-color: var(--color-secondary);
      }
      .bg-warning {
        background-color: var(--color-warning);
      }
      .bg-danger {
        background-color: var(--color-danger);
      }
      .bg-info {
        background-color: var(--color-info);
      }
      .text-primary {
        color: var(--color-primary);
      }
      .text-secondary {
        color: var(--color-secondary);
      }
      .text-warning {
        color: var(--color-warning);
      }
      .text-danger {
        color: var(--color-danger);
      }
      .text-info {
        color: var(--color-info);
      }
      .border-primary {
        border-color: var(--color-primary);
      }
      .border-secondary {
        border-color: var(--color-secondary);
      }
      .border-warning {
        border-color: var(--color-warning);
      }
      .border-danger {
        border-color: var(--color-danger);
      }
      .border-info {
        border-color: var(--color-info);
      }

      .card-hover:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
      }

      .transition-all {
        transition: all 0.3s ease;
      }
      
      /* 移动端特定样式 */
      body {
        overscroll-behavior-y: contain;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 20px; /* 移除底部导航栏后减少底部间距 */
      }
      
      .bottom-nav {
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
      }
      
      /* 下拉刷新动画 */
      .pull-to-refresh {
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: -60px;
        transition: margin-top 0.3s ease;
      }
      
      .pull-to-refresh.active {
        margin-top: 0;
      }
      
      /* 标签页样式 */
      .tab-active {
        color: var(--color-primary);
        border-bottom: 2px solid var(--color-primary);
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <!-- 下拉刷新指示器 -->
    <div class="pull-to-refresh" id="pullToRefresh">
      <div class="flex items-center">
        <i class="fas fa-sync-alt fa-spin mr-2 text-primary"></i>
        <span class="text-sm text-gray-600">下拉刷新...</span>
      </div>
    </div>
    
    <!-- 顶部导航栏 -->
    <div class="bg-blue-500 text-white p-4 sticky top-0 z-10">
      <div class="flex justify-between items-center">
        <div class="flex items-center">
          <a href="index.html" class="mr-2">
            <i class="fas fa-arrow-left"></i>
          </a>
          <h1 class="text-lg font-bold">洽谈记录</h1>
        </div>
        <a href="negotiate-create.html" class="bg-white bg-opacity-20 rounded-full w-8 h-8 flex items-center justify-center">
          <i class="fas fa-plus"></i>
        </a>
      </div>
    </div>

    <!-- 搜索栏 -->
    <div class="p-4 bg-white sticky top-16 z-10 shadow-sm">
      <div class="relative">
        <input
          type="text"
          placeholder="搜索供应商或鱼种品种"
          class="w-full bg-gray-100 rounded-full py-2 px-4 pl-10 text-sm focus:outline-none focus:ring-2 focus:ring-primary"
        />
        <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
      </div>
    </div>

    <!-- 标签页 -->
    <div class="flex bg-white border-b border-gray-200">
      <button class="flex-1 py-3 text-sm font-medium tab-active" data-tab="ongoing-tab">
        洽谈中
      </button>
      <button class="flex-1 py-3 text-sm font-medium text-gray-500" data-tab="purchasing-tab">
        采购中
      </button>
      <button class="flex-1 py-3 text-sm font-medium text-gray-500" data-tab="completed-tab">
        已完成
      </button>
    </div>
    
    <!-- 筛选选项 -->
    <div class="flex p-2 bg-white border-b border-gray-100 overflow-x-auto whitespace-nowrap">
      <button class="px-3 py-1 mx-1 bg-primary text-white rounded-full text-xs flex items-center">
        全部
        <i class="fas fa-times-circle ml-1"></i>
      </button>
      <button class="px-3 py-1 mx-1 bg-gray-100 text-gray-600 rounded-full text-xs">
        鳜鱼
      </button>
      <button class="px-3 py-1 mx-1 bg-gray-100 text-gray-600 rounded-full text-xs">
        鲈鱼
      </button>
      <button class="px-3 py-1 mx-1 bg-gray-100 text-gray-600 rounded-full text-xs">
        鳕鱼
      </button>
      <button class="px-3 py-1 mx-1 bg-gray-100 text-gray-600 rounded-full text-xs">
        本月
      </button>
      <button class="px-3 py-1 mx-1 bg-gray-100 text-gray-600 rounded-full text-xs">
        价格
        <i class="fas fa-sort ml-1"></i>
      </button>
    </div>

    <!-- 洽谈记录列表 - 洽谈中 -->
    <div class="p-4 tab-content" id="ongoing-tab">
      <div class="space-y-4">


        <!-- 洽谈记录卡片 - 洽谈中 -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover">
          <div class="p-4">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-base font-bold">江苏淡水鱼种基地</h3>
                <p class="text-xs text-gray-500 mt-1">洽谈时间: 2023-06-14</p>
              </div>
              <div class="flex flex-col items-end">
                <span class="bg-blue-100 text-primary text-xs px-2 py-0.5 rounded-full mb-1">鲈鱼种</span>
                <span class="bg-yellow-100 text-yellow-600 text-xs px-2 py-0.5 rounded-full">洽谈中</span>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-2 mb-3">
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">价格</p>
                <p class="text-sm font-medium">¥0.25/尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">数量</p>
                <p class="text-sm font-medium">5万尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">计量方式</p>
                <p class="text-sm font-medium">机器计量</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">起塘条件</p>
                <p class="text-sm font-medium">拉练、代运</p>
              </div>
            </div>
            <div class="flex justify-end space-x-2">
              <a href="negotiate-detail.html?id=2" class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">
                详情
              </a>
              <a href="purchase-detail.html?negotiate_id=2" class="bg-primary text-white text-xs px-3 py-1 rounded-full">
                采购
              </a>
            </div>
          </div>
        </div>



        <!-- 洽谈记录卡片 - 洽谈中 -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover">
          <div class="p-4">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-base font-bold">福建海鲜养殖场</h3>
                <p class="text-xs text-gray-500 mt-1">洽谈时间: 2023-06-10</p>
              </div>
              <div class="flex flex-col items-end">
                <span class="bg-blue-100 text-primary text-xs px-2 py-0.5 rounded-full mb-1">鳕鱼种</span>
                <span class="bg-yellow-100 text-yellow-600 text-xs px-2 py-0.5 rounded-full">洽谈中</span>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-2 mb-3">
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">价格</p>
                <p class="text-sm font-medium">¥0.12/尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">数量</p>
                <p class="text-sm font-medium">15万尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">计量方式</p>
                <p class="text-sm font-medium">抽数法</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">起塘条件</p>
                <p class="text-sm font-medium">停食</p>
              </div>
            </div>
            <div class="flex justify-end space-x-2">
              <a href="negotiate-detail.html?id=4" class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">
                详情
              </a>
              <a href="purchase-detail.html?negotiate_id=4" class="bg-primary text-white text-xs px-3 py-1 rounded-full">
                采购
              </a>
            </div>
          </div>
        </div>


      </div>
    </div>

    <!-- 洽谈记录列表 - 已完成 -->
    <div class="p-4 tab-content hidden" id="completed-tab">
      <div class="space-y-4">
        <!-- 洽谈记录卡片 - 已完成 -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover">
          <div class="p-4">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-base font-bold">浙江鱼种养殖场</h3>
                <p class="text-xs text-gray-500 mt-1">洽谈时间: 2023-05-15</p>
              </div>
              <div class="flex flex-col items-end">
                <span class="bg-blue-100 text-primary text-xs px-2 py-0.5 rounded-full mb-1">鳜鱼种</span>
                <span class="bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded-full">已完成</span>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-2 mb-3">
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">价格</p>
                <p class="text-sm font-medium">¥0.32/尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">数量</p>
                <p class="text-sm font-medium">2.5万尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">计量方式</p>
                <p class="text-sm font-medium">人工计量</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">起塘条件</p>
                <p class="text-sm font-medium">拉练</p>
              </div>
            </div>
            <div class="flex justify-end space-x-2">
              <a href="negotiate-detail.html?id=6" class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">
                详情
              </a>
            </div>
          </div>
        </div>
        
        <!-- 洽谈记录卡片 - 已完成 -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover">
          <div class="p-4">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-base font-bold">山东海产养殖基地</h3>
                <p class="text-xs text-gray-500 mt-1">洽谈时间: 2023-05-10</p>
              </div>
              <div class="flex flex-col items-end">
                <span class="bg-blue-100 text-primary text-xs px-2 py-0.5 rounded-full mb-1">鲈鱼种</span>
                <span class="bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded-full">已完成</span>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-2 mb-3">
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">价格</p>
                <p class="text-sm font-medium">¥0.26/尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">数量</p>
                <p class="text-sm font-medium">4万尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">计量方式</p>
                <p class="text-sm font-medium">机器计量</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">起塘条件</p>
                <p class="text-sm font-medium">停食</p>
              </div>
            </div>
            <div class="flex justify-end space-x-2">
              <a href="negotiate-detail.html?id=7" class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">
                详情
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 洽谈记录列表 - 采购中 -->
    <div class="p-4 tab-content hidden" id="purchasing-tab">
      <div class="space-y-4">
        <!-- 洽谈记录卡片 - 采购中 -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover">
          <div class="p-4">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-base font-bold">广东海洋鱼种场</h3>
                <p class="text-xs text-gray-500 mt-1">洽谈时间: 2023-06-10</p>
              </div>
              <div class="flex flex-col items-end">
                <span class="bg-blue-100 text-primary text-xs px-2 py-0.5 rounded-full mb-1">鳕鱼种</span>
                <span class="bg-green-100 text-green-600 text-xs px-2 py-0.5 rounded-full">采购中</span>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-2 mb-3">
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">价格</p>
                <p class="text-sm font-medium">¥0.30/尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">数量</p>
                <p class="text-sm font-medium">2万尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">计量方式</p>
                <p class="text-sm font-medium">机器计量</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">起塘条件</p>
                <p class="text-sm font-medium">拉练</p>
              </div>
            </div>
            <div class="flex justify-end space-x-2">
              <a href="negotiate-detail.html?id=1" class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">
                详情
              </a>
              <a href="purchase-detail.html?id=1" class="bg-primary text-white text-xs px-3 py-1 rounded-full">
                查看采购
              </a>
            </div>
          </div>
        </div>
        
        <!-- 洽谈记录卡片 - 采购中 -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover">
          <div class="p-4">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-base font-bold">湖南优质鱼种场</h3>
                <p class="text-xs text-gray-500 mt-1">洽谈时间: 2023-06-05</p>
              </div>
              <div class="flex flex-col items-end">
                <span class="bg-blue-100 text-primary text-xs px-2 py-0.5 rounded-full mb-1">鳜鱼种</span>
                <span class="bg-green-100 text-green-600 text-xs px-2 py-0.5 rounded-full">采购中</span>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-2 mb-3">
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">价格</p>
                <p class="text-sm font-medium">¥0.35/尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">数量</p>
                <p class="text-sm font-medium">1.5万尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">计量方式</p>
                <p class="text-sm font-medium">人工计量</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">起塘条件</p>
                <p class="text-sm font-medium">拉练</p>
              </div>
            </div>
            <div class="flex justify-end space-x-2">
              <a href="negotiate-detail.html?id=3" class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">
                详情
              </a>
              <a href="purchase-detail.html?id=3" class="bg-primary text-white text-xs px-3 py-1 rounded-full">
                查看采购
              </a>
            </div>
          </div>
        </div>
        
        <!-- 洽谈记录卡片 - 采购中 -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden transition-all card-hover">
          <div class="p-4">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-base font-bold">安徽淡水鱼养殖基地</h3>
                <p class="text-xs text-gray-500 mt-1">洽谈时间: 2023-06-08</p>
              </div>
              <div class="flex flex-col items-end">
                <span class="bg-blue-100 text-primary text-xs px-2 py-0.5 rounded-full mb-1">鲈鱼种</span>
                <span class="bg-green-100 text-green-600 text-xs px-2 py-0.5 rounded-full">采购中</span>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-2 mb-3">
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">价格</p>
                <p class="text-sm font-medium">¥0.28/尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">数量</p>
                <p class="text-sm font-medium">3万尾</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">计量方式</p>
                <p class="text-sm font-medium">机器计量</p>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <p class="text-xs text-gray-500">起塘条件</p>
                <p class="text-sm font-medium">拉练</p>
              </div>
            </div>
            <div class="flex justify-end space-x-2">
              <a href="negotiate-detail.html?id=5" class="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">
                详情
              </a>
              <a href="purchase-detail.html?id=5" class="bg-primary text-white text-xs px-3 py-1 rounded-full">
                查看采购
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 底部导航栏已移除 -->

    <script>
      // 标签页切换
      const tabButtons = document.querySelectorAll('[data-tab]');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabButtons.forEach(button => {
        button.addEventListener('click', () => {
          // 移除所有标签的激活状态
          tabButtons.forEach(btn => {
            btn.classList.remove('tab-active');
            btn.classList.add('text-gray-500');
          });
          
          // 添加当前标签的激活状态
          button.classList.add('tab-active');
          button.classList.remove('text-gray-500');
          
          // 隐藏所有内容
          tabContents.forEach(content => {
            content.classList.add('hidden');
          });
          
          // 显示当前标签对应的内容
          const tabId = button.getAttribute('data-tab');
          document.getElementById(tabId).classList.remove('hidden');
        });
      });
      
      // 下拉刷新功能
      let touchStartY = 0;
      let touchEndY = 0;
      const pullToRefresh = document.getElementById("pullToRefresh");

      document.addEventListener(
        "touchstart",
        function (e) {
          touchStartY = e.touches[0].clientY;
        },
        false
      );

      document.addEventListener(
        "touchmove",
        function (e) {
          touchEndY = e.touches[0].clientY;

          // 只有当页面滚动到顶部时才触发下拉刷新
          if (window.scrollY === 0 && touchEndY > touchStartY) {
            const distance = touchEndY - touchStartY;

            if (distance > 30 && distance < 90) {
              pullToRefresh.classList.add("active");
              e.preventDefault(); // 阻止默认滚动
            }
          }
        },
        { passive: false }
      );

      document.addEventListener(
        "touchend",
        function () {
          if (pullToRefresh.classList.contains("active")) {
            // 模拟刷新操作
            setTimeout(() => {
              pullToRefresh.classList.remove("active");
              // 这里可以添加实际的刷新逻辑
              // location.reload();
            }, 1500);
          }
        },
        false
      );
    </script>
  </body>
</html>